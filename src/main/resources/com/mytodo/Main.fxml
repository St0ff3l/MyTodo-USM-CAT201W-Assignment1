<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox fx:id="root" prefHeight="650.0" prefWidth="1000.0" spacing="6.0" styleClass="gradient-theme" stylesheets="gradient.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mytodo.MainController">

    <HBox spacing="10" VBox.vgrow="ALWAYS">
        <padding><Insets bottom="10" left="10" right="10" top="6" /></padding>
        <children>

            <!-- å·¦ä¾§å¯¼èˆªæ  -->
            <VBox fx:id="sidebar" prefHeight="634.0" prefWidth="260.0" spacing="8" style="-fx-background-radius: 16; -fx-padding: 10;">

                <children>

                    <!-- é¡¶éƒ¨èœå•æ  -->
                    <MenuBar prefHeight="14.0" prefWidth="239.0" styleClass="menu-bar-rounded">
                        <menus>
                            <Menu text="File">
                                <items><MenuItem onAction="#handleExit" text="Exit" /></items>
                            </Menu>
                            <Menu text="Edit">
                                <items><MenuItem onAction="#handleDeleteCompleted" text="Delete All Completed" /></items>
                            </Menu>
                            <Menu text="Help">
                                <items><MenuItem onAction="#handleHelp" text="About" /></items>
                            </Menu>
                        </menus>
                    </MenuBar>

                    <!-- Today -->
                    <Button fx:id="btnToday" maxWidth="Infinity" onAction="#onFilterToday" prefHeight="26.0" styleClass="nav-item">
                        <graphic>
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <image><Image url="@icons/today.png" /></image>
                            </ImageView>
                        </graphic>
                        <text>Today</text>
                    </Button>

                    <!-- Important -->
                    <Button fx:id="btnImportant" maxWidth="Infinity" onAction="#onFilterImportant" styleClass="nav-item">
                        <graphic>
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <image><Image url="@icons/star.png" /></image>
                            </ImageView>
                        </graphic>
                        <text>Important</text>
                    </Button>

                    <!-- All -->
                    <Button fx:id="btnAll" maxWidth="Infinity" onAction="#onFilterAll" styleClass="nav-item">
                        <graphic>
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <image><Image url="@icons/list.png" /></image>
                            </ImageView>
                        </graphic>
                        <text>All</text>
                    </Button>

                    <Separator />

                    <!-- Pending -->
                    <Button fx:id="btnPending" maxWidth="Infinity" onAction="#onFilterPending" styleClass="nav-item">
                        <graphic>
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <image><Image url="@icons/pending.png" /></image>
                            </ImageView>
                        </graphic>
                        <text>Pending</text>
                    </Button>

                    <!-- Completed -->
                    <Button fx:id="btnFinished" maxWidth="Infinity" onAction="#onFilterFinished" styleClass="nav-item">
                        <graphic>
                            <ImageView fitHeight="18" fitWidth="18" preserveRatio="true">
                                <image><Image url="@icons/check.png" /></image>
                            </ImageView>
                        </graphic>
                        <text>Completed</text>
                    </Button>

                </children>
            </VBox>

            <!-- å³ä¾§ä»»åŠ¡åŒºï¼ˆå®Œå…¨æ²¡åŠ¨ä½ çš„åŽŸä»£ç ï¼‰ -->
            <StackPane HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                <children>

                    <VBox prefHeight="200.0" prefWidth="100.0">
                        <children>

                            <!-- æœç´¢æ  -->
                            <!-- ðŸ Spotlight-style æœç´¢æ  -->
                            <HBox alignment="CENTER_LEFT" spacing="8" styleClass="search-container" HBox.hgrow="ALWAYS">

                                <!-- æœç´¢å›¾æ ‡ -->
                                <ImageView fitHeight="14" fitWidth="14" preserveRatio="true" styleClass="search-icon">
                                    <image>
                                        <Image url="@icons/search_icon.png" />
                                    </image>
                                </ImageView>

                                <!-- è¾“å…¥æ¡†è‡ªé€‚åº”å±•å¼€ -->
                                <TextField fx:id="searchField" maxHeight="28" promptText="Search tasks..." styleClass="search-field" HBox.hgrow="ALWAYS" />

                                <!-- è‡ªåŠ¨æŠŠæŒ‰é’®æŽ¨åˆ°æœ€å³ä¾§ -->
                                <Region HBox.hgrow="ALWAYS" />

                                <!-- Search æŒ‰é’® -->
                                <Button fx:id="filterBtn" onAction="#onSearchClicked" styleClass="search-chip-btn" text="Search">
                                    <font><Font size="14.0" /></font>
                                </Button>

                            </HBox>


                            <ListView fx:id="taskList" style="-fx-padding: 10; -fx-background-color: transparent;" VBox.vgrow="ALWAYS" />

                        </children>
                    </VBox>

                    <!-- åº•éƒ¨å¿«é€Ÿæ·»åŠ ä»»åŠ¡æ¡† -->
                    <HBox fx:id="floatingAddBox" alignment="BOTTOM_CENTER" mouseTransparent="false" pickOnBounds="false" prefHeight="64.0" prefWidth="634.0" spacing="8" style="-fx-padding: 0 20 20 20;">

                        <children>

                            <HBox fx:id="quickAddContainer" alignment="CENTER_LEFT" maxHeight="44" maxWidth="520" minHeight="44" minWidth="360" prefHeight="44" prefWidth="466.0" spacing="8" styleClass="quick-add-container">

                                <children>

                                    <!-- â­ æ–°åŠ çš„ + å›¾æ ‡ -->
                                    <ImageView fitHeight="20" fitWidth="20" preserveRatio="true" styleClass="quickadd-icon">
                                        <image><Image url="@icons/plus.png" /></image>
                                    </ImageView>

                                    <TextField fx:id="quickAddField" onAction="#onQuickAdd" prefHeight="23.0" prefWidth="288.0" promptText="Quick add a task..." styleClass="quick-add-field" />

                                    <Region prefHeight="44.0" prefWidth="26.0" HBox.hgrow="ALWAYS" />

                                    <Button fx:id="quickAddBtn" onAction="#onQuickAdd" styleClass="button primary" text="Add" />

                                    <Button fx:id="detailAddBtn" onAction="#onAddDetails" prefHeight="23.0" prefWidth="102.0" styleClass="button" text="Add Details..." />

                                </children>

                            </HBox>

                        </children>
                    </HBox>

                </children>
            </StackPane>

        </children>
    </HBox>
</VBox>
