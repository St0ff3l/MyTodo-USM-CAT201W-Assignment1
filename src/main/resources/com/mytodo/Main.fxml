<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox fx:id="root" prefHeight="650.0" prefWidth="1000.0" spacing="6.0" styleClass="gradient-theme" stylesheets="gradient.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mytodo.MainController">

    <!-- ä¸»ä½“ï¼šå·¦ä¾§å¯¼èˆª + å³ä¾§å†…å®¹ -->
    <HBox spacing="10" VBox.vgrow="ALWAYS">
        <padding><Insets bottom="10" left="10" right="10" top="6" /></padding>
        <children>
            <!-- å·¦ä¾§å¯¼èˆªæ  -->
            <VBox fx:id="sidebar" prefHeight="634.0" prefWidth="260.0" spacing="8" style="-fx-background-radius: 16; -fx-padding: 10;">
                <children> <!-- âœ… ç›´æŽ¥å¤ç”¨ç›¸åŒæ ·å¼ -->
                    <MenuBar styleClass="menu-bar-rounded">
                        <menus>
                            <Menu text="File">
                                <items>
                                    <MenuItem onAction="#handleExit" text="Exit" />
                                </items>
                            </Menu>
                            <Menu text="Edit">
                                <items>
                                    <MenuItem onAction="#handleDeleteCompleted" text="Delete All Completed" />
                                </items>
                            </Menu>
                            <Menu text="Help">
                                <items>
                                    <MenuItem onAction="#handleHelp" text="About" />
                                </items>
                            </Menu>
                        </menus>
                    </MenuBar>
                    <Button fx:id="btnToday" maxWidth="Infinity" onAction="#onFilterToday" prefHeight="26.0" prefWidth="169.0" styleClass="nav-item" text="Today" />
                    <Button fx:id="btnImportant" maxWidth="Infinity" onAction="#onFilterImportant" styleClass="nav-item" text="Important" />
                    <Button fx:id="btnAll" maxWidth="Infinity" onAction="#onFilterAll" styleClass="nav-item" text="All" />
                    <Separator />
                    <Button fx:id="btnPending" maxWidth="Infinity" onAction="#onFilterPending" styleClass="nav-item" text="Pending" />
                    <Button fx:id="btnFinished" maxWidth="Infinity" onAction="#onFilterFinished" styleClass="nav-item" text="Completed" />
                </children>
            </VBox>

            <!-- å³ä¾§ä»»åŠ¡åŒº -->
            <StackPane HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                <children>
                    <VBox prefHeight="200.0" prefWidth="100.0">
                        <children>

                            <!-- ðŸ Spotlight-style æœç´¢æ  -->
                            <HBox alignment="CENTER_LEFT" maxWidth="1000" minWidth="240" prefHeight="28.0" prefWidth="882.0" spacing="8" styleClass="search-container">
                                <ImageView fitHeight="14" fitWidth="14" preserveRatio="true" styleClass="search-icon">
                                    <image>
                                        <Image url="@icons/search_icon.png" />
                                    </image>
                                </ImageView>
                                <TextField fx:id="searchField" maxHeight="28" prefHeight="28" prefWidth="821.0" promptText="Search tasks..." styleClass="search-field" />

                                <!-- Search æŒ‰é’®ï¼ˆâš ï¸ ä¸å†å¥—å¤–å£³ï¼›æŒ‰é’®æœ¬ä½“å°±æ˜¯åœ†è§’èƒ¶å›Šï¼‰ -->
                                <Button fx:id="filterBtn" onAction="#onSearchClicked" styleClass="search-chip-btn" text="Search">
                                    <font>
                                        <Font size="14.0" />
                                    </font>
                                </Button>
                            </HBox>
                            <!-- ä»»åŠ¡åˆ—è¡¨ -->
                            <ListView fx:id="taskList" style="-fx-padding: 10; -fx-background-color: transparent;" VBox.vgrow="ALWAYS" />
                        </children>
                    </VBox>

                    <!-- åº•éƒ¨å¿«é€Ÿæ·»åŠ å¡ç‰‡ -->
                    <HBox fx:id="floatingAddBox" alignment="BOTTOM_CENTER" mouseTransparent="false" pickOnBounds="false" prefHeight="64.0" prefWidth="634.0" spacing="8" style="-fx-padding: 0 20 20 20;">
                        <children>
                            <HBox fx:id="quickAddContainer" alignment="CENTER_LEFT" maxHeight="44" maxWidth="520" minHeight="44" minWidth="360" prefHeight="44" prefWidth="520" spacing="8" styleClass="quick-add-container">
                                <children>
                                    <TextField fx:id="quickAddField" onAction="#onQuickAdd" prefWidth="320" promptText="Quick add a task..." styleClass="quick-add-field" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Button fx:id="quickAddBtn" onAction="#onQuickAdd" styleClass="button primary" text="Add" />
                                    <Button fx:id="detailAddBtn" onAction="#onAddDetails" styleClass="button" text="Add Details..." />
                                </children>
                            </HBox>
                        </children>
                    </HBox>
                </children>
            </StackPane>
        </children>
    </HBox>
</VBox>
